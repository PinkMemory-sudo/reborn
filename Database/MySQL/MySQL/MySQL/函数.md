# 函数



函数的移植行不强，不赞成使用函数。



**字符函数**

| 函数名        | 描述                                                 |
| ------------- | ---------------------------------------------------- |
| length()      | 获取字节个数                                         |
| concat()      | 多个字符串拼接成一个                                 |
| upper()/lower | 统一大小写                                           |
| substr()      | 多个重载，用法和Java一样(字符的长度)                 |
| instar()      | 等效于Java的indexOf，没找到返回0                     |
| trim()        | 默认去除空格,  trim('a' from 'absba')表示去除前后的a |
| lpad() rpad   | 添加n个前缀/后缀                                     |
| replace()     | 替换                                                 |



SQL中的索引都是从1开始的



**数学函数**

| 函数       | 描述                                   |
| ---------- | -------------------------------------- |
| round()    | 四舍五入默认保留整数，可以指定小鼠位数 |
| cell()     | 向上取整                               |
| f'loor()   | 向下取整                               |
| truncate() | 截取                                   |
| mod        | 取余                                   |

取余

a%b=a-a/b*b



**日期函数**

| 函数        | 描述                             |
| ----------- | -------------------------------- |
| NOW()       | 返回日期时间                     |
| CURDATE()   | 返回日期                         |
| CURTIME()   | 返回时间                         |
| YEAR()      | 获得日期中的年，传入带日期的参数 |
| MONTH()     | 月                               |
| DAY()       | 日，时分秒相同                   |
| STR_TO_DATE |                                  |
| DATE_TO_STR |                                  |
| DATEDIFF    |                                  |



**其他函数**

| 方法       | 描述 |
| ---------- | ---- |
| version()  |      |
| database() |      |
| user()     |      |



**聚合函数**

有时我们只需要统计信息而不是具体的数据。

| 聚合函数 | 描述   |
| -------- | ------ |
| AVG()    | 平均值 |
| COUNT()  | 个数   |
| MAX()    | 最大值 |
| MIN()    | 最小值 |
| SUN()    | 总和   |

聚合函数都会忽略NULL，所以在WHERE时注意去掉NULL值

聚合函数可以和IDSTINCT连用

SUM(distinct 字段名)表示值不相同的和

**COUNT**

COUNT(column_name)

COUNT(*),用来统计表的行数(不管是不是NULL)

COUNT(随便一个数字或字符) 相当于在表中加了一列，这一列每行都是这个数字或字符，最后统计数字或字符的个数

效率问题：

MYISAM，内部有计数器，COUNT(*)可以直接获得表的列数

INNODA，COUNT(*)和COUNT(1)相差不大，但比COUNT(colunm_name)效率高(多了IS NULL判断)



**加解密函数**

| 函数               | 描述      |
| ------------------ | --------- |
| PASSWORD()         | 8.0后弃用 |
| MD5()              |           |
| SHA()              |           |
| ENCODE(value,seed) |           |
| DECODE(value,seed) |           |

