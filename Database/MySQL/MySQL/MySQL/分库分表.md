

# 读写分离



# 分库分表



## 垂直分区



## 水平分区

水平分区，数据还存在一个数据库中，所以性能不会提升，所以水平分区最好分库。



**水平分区的缺点**：

* 分片事务难以解决

* 跨节点join性能差
* 提升了逻辑，运维，部署的复杂度

优化得当时，千万级一下的数据量足矣支持。如果需要分片，进行在客户端进行分片，减少一次和中间件的网络IO。



## **数据库分片的常见方案**



**客户端代理**

分片逻辑写在客户端，当当的Sharing-JDBC和阿里的TDDL是比较常用的方案。



**中间件代理**

分片逻辑维护在中间件中，常用方案是MyCat等。



**分库分表后，id主键怎么设置**

* UUID：太长，查询效率底

* 自增Id：可以给不同数据库设置不同的步长，但需要单独部署数据库，成本高，还会有性能瓶颈

* 利用redis生成Id：性能好，灵活方便

  











